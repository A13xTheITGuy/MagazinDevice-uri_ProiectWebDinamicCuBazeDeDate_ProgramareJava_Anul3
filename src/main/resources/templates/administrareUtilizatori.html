<html xmlns:th="http://www.thymeleaf.org">
<header>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<title>
		Administrare utilizatori
	</title>
</header>

<body>
<center>

<br>
<h1>Administrare utilizatori</h1>

<br>
	<table class="table table-striped table-bordered" style="width:75%">
		<tr>
			<th sec:authorize="hasAnyRole('EDITOR','ADMIN')">id</th>
			<th sec:authorize="hasAnyRole('EDITOR','ADMIN')">nume</th>
			<th sec:authorize="hasAnyRole('EDITOR','ADMIN')">username</th>
			<th sec:authorize="hasAnyRole('EDITOR','ADMIN')">rol</th>
			<th sec:authorize="hasAnyRole('EDITOR','ADMIN')">ACTIUNI</th>
		</tr>
		<tr th:each="c : ${listaUseri}">
			<td th:text="${c.id}" sec:authorize="hasAnyRole('ADMIN')"></td>
			<td th:text="${c.nume}" sec:authorize="hasAnyRole('ADMIN')"></td>
			<td th:text="${c.username}" sec:authorize="hasAnyRole('ADMIN')"></td>
			<td th:text="${c.rol}" sec:authorize="hasAnyRole('ADMIN')"></td>
			
			<td sec:authorize="hasAnyRole('EDITOR','ADMIN')">
        		<a th:href="@{/admin/users/edit/{id}(id=${c.id})}" class="btn btn-primary">Edit</a>

        		<form th:action="@{/admin/users/delete/{id}(id=${c.id})}"
			          method="POST"
			          style="display:inline"
			          onsubmit="if(!confirm('Sigur doriti sa stergeti acest utilizator?')){event.preventDefault();}">
			
			        <input type="hidden"
			               th:name="${_csrf.parameterName}"
			               th:value="${_csrf.token}" />
			
			        <button type="SUBMIT" class="btn btn-danger">
			            Delete
			        </button>
			    </form>
    		</td>
			
		</tr>
	</table>
<br>
	<form th:action="@{/logout}" method="POST" style="display: inline;">
		<input type="hidden"
	           th:name="${_csrf.parameterName}"
	           th:value="${_csrf.token}" />
        <button type="submit" class="btn btn-primary">Logout</button>
    </form>
    <form th:action="@{/lista-deviceuri}" method="GET" style="display: inline;">
        <button type="submit" class="btn btn-primary">Home</button>
    </form>
    <br>
</body>
</html>